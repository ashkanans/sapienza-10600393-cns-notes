%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                            %
%                    Read constant commands                  %
%                                                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{resources/constants/images path/IMAGE_PATH.tex}
\input{resources/constants/images path/IMAGE_NAMES.tex}
\input{resources/constants/images path/IMAGE_REFS.tex}
\input{resources/constants/configuration/GENERAL_CONFIGURATION.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                            %
%                       Custom Commands                      %
%                                                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Usage: \imageCaptionTable{image path}{image caption}{image label}{text}
% - The first argument should be the path to the image file in any format.
% - The second argument should be the caption of the image to be displayed.
% - The third argument should be the label of the image.
% - The fourth argument should be the text to be displayed on the right side of the image.
% - The resulting table will have the image displayed on the left (with the caption and label) and the text on the right.

\newcommand{\imageCaptionTable}[4]{%
	\begin{tabular}{l l}
		\includegraphics[width=0.5\textwidth, caption={#2}, label={#3}]{#1} & \centering
		\begin{varwidth}[t]{0.8\textwidth}
			\configuratedText{#4}
		\end{varwidth}
	\end{tabular}
}

% Inserts a small image in the middle of a text
% Usage: \smallimage[optional scale]{image file name}
% - The optional scale argument (default 0.5) can be used to adjust the size of the image.
% - The image file should be in the same directory as the LaTeX document.

\newcommand{\smallimage}[2][0.03]{
	\includegraphics[width=#1\linewidth]{#2}
}


% Creates a new figure with an image centered on the page, and adds a caption and label for reference.
% Usage: \sectionCenteredfigure[optional scale]{image file name}{caption text}{label}
% - The optional scale argument (default 0.9) can be used to adjust the width of the image.
% - The image file should be in the same directory as the LaTeX document.
% - The caption text should describe the contents of the image.
% - The label should be a unique identifier for the figure, used for referencing it later in the text.

\newcommand{\sectionCenteredfigure}[4][0.9]{
	\begin{figure}[H]
		\centering
		\fbox{\includegraphics[width=#1\linewidth]{#2}}
		\caption{#3}
		\label{fig:#4}
	\end{figure}
}


% Creates a new block of justified text with a specified font and font size.
% Usage: \generalText{font family}{font size}{text}
% - The font family argument specifies the font to be used (e.g., Times New Roman, Arial, etc.).
% - The font size argument specifies the size of the font (e.g., 12pt, 14pt, etc.).
% - The text argument should contain the text to be justified.
% - The resulting block of text will be fully justified (i.e., aligned with both the left and right margins).

\newcommand{\customText}[3]{%
	\par\begingroup
	\setlength{\parindent}{0pt}%
	\linespread{1.3}%
	\fontsize{#2}{#2}%
	\fontfamily{#1}\selectfont #3%
	\par\endgroup%
}

% Creates a new block of justified text with the font size and font style of configuration file.
% Usage: \generalText{text}
% - The font family argument is specfied by \userManualSimpleTextStyle 
% - The font size argument is specified by \userManualSimpleTextSize
% - The text argument should contain the text to be justified.
% - The resulting block of text will be fully justified (i.e., aligned with both the left and right margins).

\newcommand{\configuratedText}[1]{%
	\par\begingroup
	\setlength{\parindent}{0pt}%
	\linespread{1.3}%
	\selectfont #1%
	\par\endgroup%
}

% Defines a new command for referencing figures.
% Usage: \figref{label}
% - The argument should be the label of the figure to be referenced.
% - The resulting output will be in the format "(Figure <number>)", where <number> is the number of the referenced figure.
% - The label should be defined using \label{fig:<label>} command in the figure environment.
% - The \hyperref command creates a hyperlink to the referenced figure.
% - The \ref* command produces only the number of the referenced figure, without the preceding "Figure" text.

\newcommand{\figref}[1]{(\hyperref[fig:#1]{Figure \ref*{fig:#1}})}

% Creates a new table with an icon and its name.
% Usage: \customTable{icon path}{icon name}
% - The first argument should be the path to the icon file in PNG format.
% - The second argument should be the name of the icon to be displayed.
% - The resulting table will have the icon displayed on the left and its name on the right.

\newcommand{\iconNameTable}[2]{%
	\begin{tabular}{l l}
		\includegraphics[width=0.03\textwidth]{#1} & \centering 
		\begin{varwidth}[t]{0.8\textwidth}
			\configuratedText{#2}
		\end{varwidth}
	\end{tabular}
}

% Creates a new table with an icon and its name.
% Usage: \customTable{icon path}{icon name}
% - The first argument should be a text.
% - The second argument should be a text.
% - The resulting table will have the text displayed on the left and a text on the right.

\newcommand{\textTextTable}[3][2cm]{%
	\begin{tabular}{p{#1} p{\dimexpr0.90\textwidth-#1}}
		\configuratedText{#2}
		&
		\begin{varwidth}[t]{\linewidth}
			\configuratedText{#3}
		\end{varwidth}
	\end{tabular}
}

% Creates a new table with an icon, its name, and its description.
% Usage: \iconNameDescriptTable{icon path}{icon name}{icon description}
% - The first argument should be the path to the icon file in PNG format.
% - The second argument should be the name of the icon to be displayed.
% - The third argument should be a description of the icon.
% - The resulting table will have the icon displayed on the left, its name in the middle, and its description on the right.
% - The table has three columns with widths of 0.1, 0.3, and 0.5 times the text width, respectively.
% - The second and third columns are aligned to the left.

\newcommand{\iconNameDescriptTable}[3]{%
	\begin{tabular}{p{0.05\textwidth} p{0.2\textwidth} m{0.6\textwidth}}
		\includegraphics[width=0.03\textwidth]{#1} & \raggedright \configuratedText{#2} & \justify \configuratedText{#3} \
	\end{tabular}
}

% Creates a new table with an text, its name, and its description.
% Usage: \textDescriptTable{text}{text name}{text description}
% - The first argument should be the text to be displayed on the left.
% - The second argument should be the name of the text.
% - The third argument should be a description of the text.
% - The resulting table will have the text displayed on the left, its name in the middle, and its description on the right.
% - The table has three columns with widths of 0.1, 0.3, and 0.5 times the text width, respectively.
% - The second and third columns are aligned to the left.

\newcommand{\textDescriptTable}[3]{%
	\begin{tabular}{m{0.1\textwidth} m{0.1\textwidth} m{0.5\textwidth}}
		\raggedright \configuratedText{#1} & \raggedright \configuratedText{#2} & \raggedright \configuratedText{#3} \
	\end{tabular}
}

% Creates a new block of two columns with an image on the left and justified text on the right.
% Usage: \twocolumns{optional scale}{image file name}{caption text}{font family}{font size}{text}

% - 1: The optional scale argument (default 0.9) can be used to adjust the width of the image.
% - 2: The image file should be in the same directory as the LaTeX document.
% - 3: The caption text should describe the contents of the image.
% - 4: The font family argument specifies the font to be used (e.g., Times New Roman, Arial, etc.).
% - 5: The font size argument specifies the size of the font (e.g., 12pt, 14pt, etc.).
% - 6: The text argument should contain the text to be justified.

\newcommand{\twoColumns}[6]{
	\begin{minipage}[t]{0.50\textwidth}
		\customText{#4}{#5}{#6}
	\end{minipage}\hfill
	\begin{minipage}[r]{0.45\textwidth}

	\end{minipage}
}

\documentclass[\userManualSimpleTextSize]{article}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{tocloft}
\usepackage{booktabs}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{times}
\usepackage{wrapfig}
\usepackage{array}
\usepackage{varwidth}
\usepackage{float}
\usepackage{titlesec}
\usepackage{ragged2e}
\usepackage{todonotes}

% Use the new command to set the font sizes and titleformat settings
\myheadingstyles

% Customize hyperlinks in the document
\hypersetup{
	colorlinks=true, % enable colored hyperlinks
	linkcolor=black, % set the color of internal links to black
	filecolor=magenta, % set the color of links to local files to magenta
	urlcolor=blue, % set the color of links to URLs to blue
	bookmarks=true, % enable the creation of bookmarks in the PDF file
}

\geometry{
	a4paper, % set paper size to A4
	left=2cm, % set left margin to 2cm
	right=2cm, % set right margin to 2cm
	top=2.5cm, % set top margin to 2.5cm
	bottom=2.5cm % set bottom margin to 2.5cm
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                            %
%                    Document Starts Here                    %
%                                                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
	
	\begin{center}
		\begin{figure}[h]
			\centering
			\includegraphics[width=0.4\linewidth]{\cnsFiveTwelve}
		\end{figure}
		\vspace{1cm} 
		{\fontsize{28}{34}\selectfont \textbf{Cybersecurity}}
	\end{center}

	\vspace{1cm} 
	
	\begin{center}
	{\fontsize{22}{28}\selectfont \textbf{Professor: F. d'Amore}}
	\end{center}

	\vspace{1cm} 

	\textcolor{blue!60!black}{\rule{\linewidth}{2pt}}
	
	\vspace{10cm} 
	
	\begin{center}
	\textbf{A.Y. 2022/23}
	\end{center}

	\thispagestyle{empty}
	
	\newpage
	
	\myTOC

	\newpage
	\section{Introduction and terminologies}
	
	\newpage
	\section{Symmetric Encryption}
	\configuratedText{Secret key cryptography involves the use of a single key. Given a message (the plaintext) and the key, encryption produces unintelligible data which is about the same length as the plaintext was.\\
	Secret key cryptography is sometimes referred to as \textbf{conventional cryptography} or \textbf{symmetric cryptography}.\\
	Secret key encryption schemes require that both the party that does the encryption and the party that does the decryption share a secret key. We will discuss two types of secret key encryption schemes:
	\begin{itemize}
	\item \textbf{Stream Ciphers}: This uses the key as a seed for a pseudorandom number generator, produces a stream of pseudorandom bits, and $\oplus$ s (bitwise exclusive ors) that stream with the data. Since $\oplus$ is its own inverse, the same computation performs both encryption and decryption.
	\item \textbf{Block Ciphers}: This takes as input a secret key and a plaintext block of fixed size (older ciphers used 64-bit blocks, modern ciphers use 128-bit blocks). It produces a ciphertext block the same size as the plaintext block. To encrypt messages larger than the blocksize, the block cipher is used iteratively with algorithms called \textit{modes of operation}. A block cipher also has a decryption operation that does the reverse computation.
	\end{itemize}
	So, block ciphers encrypt data in blocks of set lengths, while stream ciphers do not and instead encrypt plaintext one byte at a time. The two encryption approaches, therefore, vary widely in implementation and use cases.\\
	Here we will have some prerequisite concepts and then we will dive into these two encryption algorithms}

	\newpage
	\subsection{Finite Fields}

	\newpage
	\subsection{Per-Round Keys}
	
	\newpage
	\subsection{S-boxes and Bit Shuffles}

	\newpage
	\subsection{Feistel Cipher} \label{feistel-cipher}
	\configuratedText{It is very important to make the encryption algorithm revered so that the decryption is possible. One method (used by AES) of having a cipher is to make all components reversible. With DES, the S-boxes are clearly not reversible since they map 6-bit inputs to 4-bit outputs. So instead, DES is designed to be reversible using a clever technique known as a Feistel cipher.\\
	A Feistel cipher builds reversible transformations out of one-way transformations by only working on half the bits of the input value at a time. let us assume a 64-bit input block. \figref{feistel-cipher} shows both how encryption and decryption work. In a Feistel cipher there is some irreversible component that scrambles the input. We’ll call that component the mangler function.\\
	In encryption for round n, the 64-bit input to round $n$ is divided into two 32-bit halves called $L_{n}$ and $R_{n}$. Round n generates as output 32-bit quantities $L_{n+1}$ and $R_{n+1}$. The concatenation of $L_{n+1}$ and $R_{n+1}$ is the 64-bit output of round n and, if there’s another round, the input to round n+1. $L_{n+1}$ is simply $R_{n}$. To compute $R_{n+1}$, do the following. $R_{n}$ and $K_{n}$ are input to the mangler
	function, which takes as input 32 bits of data plus some bits of key to produce a 32-bit output. The 32-bit output of the mangler is XORed with $L_{n}$ to obtain $R_{n+1}$.}
	\sectionCenteredfigure{\FeistelCipher}{Feistel Cipher}{feistel-cipher}
	
	\newpage
	\subsection{Stream Ciphers}
	\configuratedText{Idea: try to simulate one-time pad\\
	A stream cipher encrypts a continuous string of binary digits by applying time-varying transformations on plaintext data. Therefore, this type of encryption works bit-by-bit, using keystreams to generate ciphertext for arbitrary lengths of plain text messages. The cipher combines a key (128/256 bits) and a nonce digit (64-128 bits) to produce the \textbf{keystream} — a pseudorandom number XORed with the plaintext to produce ciphertext. While the key and the nonce can be reused, the keystream has to be unique for each encryption iteration to ensure security. Stream encryption ciphers achieve this using feedback shift registers to generate a \textbf{unique nonce (number used only once) to create the keystream}.\\\\
	Encryption schemes that use stream ciphers are less likely to propagate system-wide errors since an error in the translation of one bit does not typically affect the entire plaintext block. Stream encryption also occurs in a \textbf{linear, continuous manner}, making it simpler and faster to implement. On the other hand, stream ciphers lack diffusion since each plaintext digit is mapped to one ciphertext output. Additionally, they do not validate authenticity, making them vulnerable to insertions. If hackers break the encryption algorithm, they can insert or modify the encrypted message without detection. Stream ciphers are mainly used to encrypt data in applications where the amount of plain text cannot be determined and in low latency use-cases.}
	
	\newpage
	\subsection{Types of Stream Ciphers}
	\configuratedText{
	Stream ciphers fall into two categories:\\
	
	\textbf{Synchronous Stream Ciphers:}
	
	\begin{itemize}
		\item  In a synchronous stream cipher, the keystream block is generated independently of the previous ciphertext and plaintext messages. This means that \textbf{each keystream block is generated based only on the key} and does not depend on any previous blocks.
		\item 	The most common stream cipher modes use pseudorandom number generators (PRNGs) to create a string of bits, which is combined with the key to form the keystream.
		\item 	The keystream is then XORed with the plaintext to generate the ciphertext.
	\end{itemize}
	
	Self-Synchronizing/Asynchronous Stream Ciphers:
	
	\begin{itemize}
		\item 	A self-synchronizing stream cipher, also known as ciphertext autokey, \textbf{generates the keystream block as a function of both the symmetric key and the fixed-size (N-bits) previous ciphertext block}.
		\item 	By altering the ciphertext, the content of the next keystream is changed. This property allows self-synchronizing ciphers to detect active attacks because any modification to the ciphertext will affect the decryption of subsequent blocks, making it easier to detect tampering.
		\item 	Asynchronous stream ciphers also provide limited error propagation. If there is a single-digit error in the ciphertext, it can affect at most N bits (the size of the previous ciphertext block) in the next keystream block
	\end{itemize}.}
	
	\subsection{Stream Ciphers in practice}
	\configuratedText{popular encryption schemes that use stream ciphers include:}
	\subsubsection{A5/1}
	\subsubsection{Rivest Cipher (RC4)}
	\subsubsection{Salsa20}
	
	\newpage
	\subsection{Block Ciphers}
	\configuratedText{Block ciphers convert data in plaintext into ciphertext in fixed-size blocks. The block size generally depends on the encryption scheme and is usually in octaves (64-bit or 128-bit blocks). If the plaintext length is not a multiple of 8, the encryption scheme uses \textbf{padding} to ensure complete blocks. For instance, to perform 128-bit encryption on a 150-bit plaintext, the encryption scheme provides two blocks, 1 with 128 bits and one with the 22 bits left. 106 Redundant bits are added to the last block to make the entire block equal to the encryption scheme’s ciphertext block size.\\\\
	While Block ciphers use symmetric keys and algorithms to perform data encryption and decryption, they also require an \textbf{initialization vector (IV)} to function. An initialization vector is a pseudorandom or random sequence of characters used to encrypt the first block of characters in the plaintext block. The resultant ciphertext for the first block of characters acts as the initialization vector for the subsequent blocks. Therefore, the symmetric cipher produces a unique ciphertext block for each iteration while the IV is transmitted along with the symmetric key and does not require encryption.\\\\
	Block encryption algorithms offer \textbf{high diffusion}; that is, if a single plaintext block were subjected to multiple encryption iterations, it resulted in a unique ciphertext block for each iteration. This makes the encryption scheme relatively tamper-proof since it is difficult for malicious actors to insert symbols into a data block without detection. On the other hand, block ciphers have a \textbf{high error propagation rate} since a bit of change in the original plaintext results in entirely different ciphertext blocks.}

	\subsection{Block Ciphers in practice}
	\subsubsection{Data Encryption Standard (DES)}
	\configuratedText{DES is a symmetric block cipher using 64 bit blocks and 56 bits key.\\
	The choice of using 56 bits for keys in DES was a compromise between security and practicality. While a longer key would provide stronger security, the designers of DES also needed to consider the limitations of computing technology at the time. The inclusion of 8 parity bits reduced the effective key size to 56 bits, which some experts even then considered inadequate for robust security. However, the decision to use a 56-bit key was likely influenced by a balance between security requirements and the feasibility of implementing and processing longer keys with the available hardware during that era.}
	\sectionCenteredfigure{\DESStructure}{Basic Structure of DE}{basic-structure-of-des}
	
	\subsubsection{DES Overview}
	\configuratedText{First, the 64-bit input is subjected to an initial bit-shuffle. Then, 56-bit key is expanded into sixteen 48-bit per-round keys by taking a 48-bit subset of the 56-bit input key for each of the keys. Each round takes a 64-bit input with a 48-bit key and produces a 64-bit cipher block. After the sixteenth round, the output has its halves swapped and then is subjected to another bit-shuffle which happens to be the inverse of the initial bit-shuffle. This swapping after the final round does not add any cryptographic strength but has a side benefit. As noted in Feistel Ciphers, Swapping the output make the encryption and description identical except for the key schedule}
	
	\subsubsection{DES Complementary Notes}
	\configuratedText{\textbf{The Mangler Function}\todo{Add DES Mangler Function}\\ 
	\textbf{Undesirable Symmetries}\todo{Add DES Undesirable}\\ 
	\textbf{DES Variants}\todo{Add DES Variantss}\\}
	
	\subsubsection{Advanced Encryption Standard (AES)}
	\configuratedText{AES is a symmetric block cipher using 128 bit blocks and 128, 192 or 256 bits key with the resulting variants called AES-128, AES-192, and AES-256.\\
	AES is similar to DES in that there is a key expansion algorithm which takes the key as an input and expands it into a bunch of round keys, and the algorithm executes a series of rounds that mangle a plaintext block into a ciphertext block. \figref{basic-structure-of-aes}. With DES each round it takes a 64-bit input with a 48-bit key and outputs 64-bit that (along with the next round key) is fed to the next round. With AES, each round takes a 128-bit input and a 128-bit key and produces a 128-bit output which is the input to the next round. Unlike DES, AES is not Feistel cipher. (The Feistel cipher structure is characterized by the division of the plaintext into two halves and the repeated application of a round function that involves both halves. Read more here: \ref{feistel-cipher})\\
	In accordance to do as many rounds as needed to make the exhaustive search cheaper than any other form of cryptanalysis, AES does more round with bigger keys. AES-128 has 10 rounds, AES-196 has 12 rounds and AES-256 has 14 rounds. If AES
	had a 64-bit version, it would have eight rounds, which would be comparable to the sixteen rounds in DES.\\
	Another diffference between DES and AES is that DES operates on bits where AES operates on octets (bytes)\\
	In AES, the key (128, 192, or 256 bits) is expanded into a series of 128-bit round keys, where there is one more round key than there are rounds. AES encryption or decryption consists of $\oplus$ing a round key into the intermediate value at the beginning of the process, at the end of the process, and between each pair of rounds.\\
	In terms of Substitution and Permutation and cryptographic transformations, DES relies on predefined tables for S-boxes and P-boxes, which may appear arbitrary without understanding their rationale. In contrast, AES provides simpler mathematical formulas for substitutions and permutations, openly stating the reasons behind their design choices.}
	
	
	\sectionCenteredfigure{\AESStructure}{Basic Structure of AE}{basic-structure-of-aes}
	
	\subsubsection{AES Complementary Notes}
	\configuratedText{\textbf{(AES’s S-box)}\todo{Add AES S-Box}\\ 
	\textbf{Key expansion}\todo{Add AES Key expansion}\\ }

	\subsection{Block Ciphers Modes of Operations}
	\configuratedText{Block ciphers operate on fixed-length blocks, typically 64 or 128 bits. The reason for using fixed-length blocks is twofold: first, messages can have varying lengths, and second, encrypting the same plaintext with the same key should always produce the same output.\\
	To address the need for encrypting messages of \textbf{arbitrary} lengths, several modes of operation have been invented. These modes allow block ciphers to provide confidentiality for messages of any length. These modes define how the block cipher is applied to multiple blocks and how they are combined to encrypt or decrypt the entire message.}

	\subsubsection{Electronic Cook Book (ECB)}
	\configuratedText{a full 128 bits), and encrypt each block
	with the secret key \figref{electronic-code-book-encryption}. The other side receives the encrypted blocks and decrypts each block in turn to recover the original message \figref{electronic-code-book-decryption}.}

	\sectionCenteredfigure{\ECBEncryption}{Electronic Code Book Encryption}{electronic-code-book-encryption}
	
	\sectionCenteredfigure{\ECBDecryption}{Electronic Code Book Decryption}{electronic-code-book-decryption}
	
	\configuratedText{ECB has two serious flaws. Patterns in the ciphertext, such as repeated blocks, leak information, and nothing prevents someone from rearranging, deleting, modifying, or duplicating blocks.}
	
	\subsubsection{Cipher Block Chaining (CBC)}
	\subsubsection{Cipher Stealing}
	\subsubsection{Cipher Feedback (CFB)}
	\subsubsection{Output Feedback (OFB)}
	\subsubsection{Counter Mode (CTR)}
		
	\newpage
	\section{Data Integrity}
	
	\newpage
	\section{Public Key Cryptography}
	
	\newpage
	\section{Digital Signatures}
	
	\newpage
	\section{Cryptographically Secure Pseudo-Random Number Generators}
	
	\newpage
	\section{Authentication}

	\newpage
	\section{Secret Sharing}

	\newpage
	\section{Access Control}

	\newpage
	\section{Secure Protocols}
	
	\newpage
	\section{Firewalls}

	\newpage
	\section{Email Security}

	\newpage
	\section{Web Technologies}	
	
	\newpage
	\section{Web Security}	
	
	\newpage
	\section{Web Tracking}	
		
\end{document}